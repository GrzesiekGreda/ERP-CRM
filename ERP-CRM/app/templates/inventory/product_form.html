{% extends "base.html" %}

{% block title %}{{ 'Edytuj produkt' if product else 'Nowy produkt' }} - ERP/CRM{% endblock %}

{% block content %}
<div class="mb-4">
    <h2><i class="bi bi-box-seam me-2"></i>{{ 'Edytuj produkt' if product else 'Nowy produkt' }}</h2>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-body">
                <form method="POST">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="name" class="form-label">Nazwa produktu <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name" value="{{ product.name if product else '' }}" required>
                        </div>
                        <div class="col-md-6">
                            <label for="sku" class="form-label">SKU <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="sku" name="sku" value="{{ product.sku if product else '' }}" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Opis</label>
                        <textarea class="form-control" id="description" name="description" rows="3">{{ product.description if product else '' }}</textarea>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="category" class="form-label">Kategoria</label>
                            <input type="text" class="form-control" id="category" name="category" value="{{ product.category if product else '' }}">
                        </div>
                        <div class="col-md-6">
                            <label for="unit" class="form-label">Jednostka</label>
                            <select class="form-select" id="unit" name="unit">
                                <option value="szt." {% if product and product.unit == 'szt.' %}selected{% endif %}>szt.</option>
                                <option value="kg" {% if product and product.unit == 'kg' %}selected{% endif %}>kg</option>
                                <option value="m" {% if product and product.unit == 'm' %}selected{% endif %}>m</option>
                                <option value="l" {% if product and product.unit == 'l' %}selected{% endif %}>l</option>
                                <option value="opak." {% if product and product.unit == 'opak.' %}selected{% endif %}>opak.</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="price" class="form-label">Cena sprzedaży <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ product.price if product else '0.00' }}" required>
                                <span class="input-group-text">PLN</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="cost" class="form-label">Koszt zakupu</label>
                            <div class="input-group">
                                <input type="number" step="0.01" class="form-control" id="cost" name="cost" value="{{ product.cost if product else '0.00' }}">
                                <span class="input-group-text">PLN</span>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="stock_quantity" class="form-label">Stan magazynowy</label>
                            <input type="number" class="form-control" id="stock_quantity" name="stock_quantity" value="{{ product.stock_quantity if product else '0' }}">
                        </div>
                        <div class="col-md-6">
                            <label for="reorder_level" class="form-label">Poziom zamówienia</label>
                            <input type="number" class="form-control" id="reorder_level" name="reorder_level" value="{{ product.reorder_level if product else '10' }}">
                        </div>
                    </div>

                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" id="is_active" name="is_active" {% if not product or product.is_active %}checked{% endif %}>
                        <label class="form-check-label" for="is_active">
                            Aktywny
                        </label>
                    </div>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle me-1"></i>Zapisz
                        </button>
                        <a href="{{ url_for('inventory.products') }}" class="btn btn-secondary">
                            <i class="bi bi-x-circle me-1"></i>Anuluj
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card bg-light">
            <div class="card-body">
                <h5 class="card-title"><i class="bi bi-info-circle me-2"></i>Informacja</h5>
                <p class="card-text small">
                    Pola oznaczone <span class="text-danger">*</span> są wymagane.
                </p>
                <hr>
                <p class="card-text small mb-0">
                    <strong>Wskazówka:</strong> SKU (Stock Keeping Unit) to unikalny kod produktu używany w magazynie.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
